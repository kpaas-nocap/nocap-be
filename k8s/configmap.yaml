apiVersion: v1
kind: ConfigMap
metadata:
  name: nocap-config
  namespace: nocap
data:
  application.yml: |
    server:
      forward-headers-strategy: framework
      tomcat:
        threads:
          max: 50
          min-spare: 8
        accept-count: 50
    spring:
      application:
        name: nocap
      main:
        lazy-initialization: true
      datasource:
        url: ${SPRING_DATASOURCE_URL}
        username: ${SPRING_DATASOURCE_USERNAME}
        password: ${SPRING_DATASOURCE_PASSWORD}
        driver-class-name: com.mysql.cj.jdbc.Driver
        hikari:
          maximum-pool-size: 5
          minimum-idle: 2
          idle-timeout: 30000
          max-lifetime: 1800000
          connection-timeout: 20000
      jpa:
        database: mysql
        database-platform: org.hibernate.dialect.MySQLDialect
        hibernate:
          ddl-auto: update
        show-sql: false
        properties:
          hibernate:
            format_sql: false
            use_sql_comments: false
      jwt:
        secret: ${JWT_SECRET}
        access-token-expiration-ms: 6000000
      kakao:
        auth:
          client: ${KAKAO_CLIENT}
          client-secret: ${KAKAO_SECRET}
          redirect: https://nocap-omega.vercel.app/login
      ai:
        openai:
          api-key: ${OPENAI_API_KEY}
    naver:
      client-id: ${NAVER_CLIENT_ID}
      client-secret: ${NAVER_CLIENT_SECRET}
    fastapi:
      server:
        url: ${FASTAPI_SERVER_URL}
    cloud:
      aws:
        region:
          static: ap-northeast-2
    management:
      endpoint:
        health:
          probes:
            enabled: true
      endpoints:
        web:
          exposure:
            include: health,info
    logging:
      level:
        root: INFO
        org.hibernate.SQL: OFF
        org.hibernate.type.descriptor.sql.BasicBinder: OFF
